<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="/assets/css/style.css">

</head>
<body>
    <main>
        <!-- Hero Section with Clarion Logo Centerpiece -->
<section class="intelligence-hub-hero" style="min-height: 100vh; display: flex; flex-direction: column; position: relative; overflow: hidden;">
    <!-- Background with depth/mystique -->
    <div class="hero-background" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #334155 50%, #475569 75%, #64748b 100%); z-index: 1;">
        <div class="floating-particles" style="position: absolute; width: 100%; height: 100%; opacity: 0.3;">
            <!-- Animated particles for depth -->
        </div>
        <div class="grid-overlay" style="position: absolute; width: 100%; height: 100%; background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.1) 1px, transparent 0); background-size: 50px 50px; opacity: 0.2;"></div>
    </div>

    <!-- Compact Header -->
    <header class="hero-header" style="padding: 1rem 0; background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); box-shadow: 0 2px 4px rgba(0,0,0,0.1); position: relative; z-index: 10;">
        <div class="logo">
            <a href="/"><img src="/assets/images/Snowball_Systems_Logo-removebg-preview.png" alt="Snowball Systems logo"></a>
        </div>
        <button class="mobile-menu-toggle" aria-label="Toggle menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <nav class="main-nav">
            <a href="/product-overview">Product Overview</a>
            <a href="/key-features">Key Features</a>
            <a href="/target-audience">Target Audience</a>
            <a href="https://app.snowballsystems.com" class="demo-link">Try the Demo</a>
        </nav>
    </header>
    
    <!-- Clarion Logo Centerpiece -->
    <div class="clarion-hero-content" style="flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; z-index: 5; padding: 4rem; min-height: 100vh;">
        <!-- Main Clarion Logo -->
        <div class="clarion-logo-container" style="text-align: center; margin-bottom: 2rem;">
            <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 381.35 253.92">
      <defs>
        <style>
          .cls-1 {
            fill: url(#radial-gradient-3);
          }

          .cls-1, .cls-2, .cls-3, .cls-4, .cls-5, .cls-6, .cls-7, .cls-8 {
            stroke: #2c5f94;
          }

          .cls-1, .cls-2, .cls-3, .cls-4, .cls-5, .cls-6, .cls-8 {
            stroke-width: 1.5px;
          }

          .cls-9 {
            font-family: NirmalaText-Semilight, 'Nirmala Text';
            font-size: 101.85px;
            font-weight: 300;
          }

          .cls-2 {
            fill: url(#radial-gradient-8);
          }

          .cls-3 {
            fill: url(#radial-gradient-6);
          }

          .cls-10 {
            stroke: url(#linear-gradient-4);
          }

          .cls-10, .cls-11, .cls-12, .cls-13, .cls-14, .cls-15, .cls-16, .cls-17, .cls-18, .cls-19, .cls-20 {
            fill: none;
            stroke-width: 2.5px;
          }

          .cls-11 {
            stroke: url(#linear-gradient-7);
          }

          .cls-12 {
            stroke: url(#linear-gradient-6);
          }

          .cls-13 {
            stroke: url(#linear-gradient-2);
          }

          .cls-14 {
            stroke: url(#linear-gradient-10);
          }

          .cls-21 {
            font-family: Bahnschrift, Bahnschrift;
            font-size: 21px;
            font-variation-settings: 'wght' 400, 'wdth' 100;
          }

          .cls-15 {
            stroke: url(#linear-gradient-8);
          }

          .cls-16 {
            stroke: url(#linear-gradient-5);
          }

          .cls-4 {
            fill: url(#radial-gradient-2);
          }

          .cls-5 {
            fill: url(#radial-gradient-4);
          }

          .cls-6 {
            fill: url(#radial-gradient);
          }

          .cls-17 {
            stroke: url(#linear-gradient-11);
          }

          .cls-22 {
            letter-spacing: -.01em;
          }

          .cls-18 {
            stroke: url(#linear-gradient);
          }

          .cls-7 {
            fill: url(#radial-gradient-7);
            stroke-width: 2px;
          }

          .cls-8 {
            fill: url(#radial-gradient-5);
          }

          .cls-19 {
            stroke: url(#linear-gradient-3);
          }

          .cls-20 {
            stroke: url(#linear-gradient-9);
          }
        </style>
        <linearGradient id="linear-gradient" x1="-457" y1="584.92" x2="-438.56" y2="566.47" gradientTransform="translate(82333.8 556.25) scale(183.13 -.69)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#6fa8dc" stop-opacity=".8"/>
          <stop offset="1" stop-color="#4a90e2" stop-opacity=".6"/>
        </linearGradient>
        <linearGradient id="linear-gradient-2" x1="-448.3" y1="600.7" x2="-446.55" y2="598.95" gradientTransform="translate(53845.86 33053.33) scale(120 -55)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#6fa8dc" stop-opacity=".8"/>
          <stop offset="1" stop-color="#4a90e2" stop-opacity=".6"/>
        </linearGradient>
        <linearGradient id="linear-gradient-3" x1="-447.64" y1="600.43" x2="-446.58" y2="599.37" gradientTransform="translate(53965.86 33108.33) scale(120 -55)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#6fa8dc" stop-opacity=".8"/>
          <stop offset="1" stop-color="#4a90e2" stop-opacity=".6"/>
        </linearGradient>
        <linearGradient id="linear-gradient-4" x1="-446.89" y1="603.39" x2="-445.11" y2="601.61" gradientTransform="translate(40321.44 57290) scale(90 -95)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#6fa8dc" stop-opacity=".8"/>
          <stop offset="1" stop-color="#4a90e2" stop-opacity=".6"/>
        </linearGradient>
        <linearGradient id="linear-gradient-5" x1="-448.17" y1="598.87" x2="-447.07" y2="597.77" gradientTransform="translate(58484 26994.17) scale(130 -45)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#6fa8dc" stop-opacity=".8"/>
          <stop offset="1" stop-color="#4a90e2" stop-opacity=".6"/>
        </linearGradient>
        <linearGradient id="linear-gradient-6" x1="-448.09" y1="603.35" x2="-447.04" y2="602.3" gradientTransform="translate(62862.14 57385) scale(140 -95)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#6fa8dc" stop-opacity=".8"/>
          <stop offset="1" stop-color="#4a90e2" stop-opacity=".6"/>
        </linearGradient>
        <linearGradient id="linear-gradient-7" x1="-446.1" y1="589" x2="-444.85" y2="587.75" gradientTransform="translate(34965.98 -13524.47) scale(78.19 23.06)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#6fa8dc" stop-opacity=".8"/>
          <stop offset="1" stop-color="#4a90e2" stop-opacity=".6"/>
        </linearGradient>
        <linearGradient id="linear-gradient-8" x1="-442.83" y1="588.13" x2="-440.74" y2="586.04" gradientTransform="translate(22248.88 11771.25) scale(50 -20)" xlink:href="#linear-gradient"/>
        <linearGradient id="linear-gradient-9" x1="-403.79" y1="603.36" x2="-402.77" y2="602.34" gradientTransform="translate(-17527.07 61880.24) rotate(-180) scale(44.33 102.5)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#6fa8dc" stop-opacity=".8"/>
          <stop offset="1" stop-color="#4a90e2" stop-opacity=".6"/>
        </linearGradient>
        <linearGradient id="linear-gradient-10" x1="-455.18" y1="576.91" x2="-441.64" y2="563.37" gradientTransform="translate(90148.98 -302.65) scale(200.54 .81)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#6fa8dc" stop-opacity=".8"/>
          <stop offset="1" stop-color="#4a90e2" stop-opacity=".6"/>
        </linearGradient>
        <linearGradient id="linear-gradient-11" x1="-437.27" y1="597.82" x2="-436.07" y2="596.61" gradientTransform="translate(13182.6 23909.58) scale(30 -40)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#6fa8dc" stop-opacity=".8"/>
          <stop offset="1" stop-color="#4a90e2" stop-opacity=".6"/>
        </linearGradient>
        <radialGradient id="radial-gradient" cx="-430.03" cy="588.67" fx="-430.03" fy="588.67" r=".5" gradientTransform="translate(8654.47 11801.25) scale(20 -20)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#4a90e2"/>
          <stop offset=".7" stop-color="#357abd"/>
          <stop offset="1" stop-color="#2c5f94"/>
        </radialGradient>
        <radialGradient id="radial-gradient-2" cx="-423.55" cy="587.09" fx="-423.55" fy="587.09" r=".5" gradientTransform="translate(7991.84 10698.42) scale(18 -18)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#4a90e2"/>
          <stop offset=".7" stop-color="#357abd"/>
          <stop offset="1" stop-color="#2c5f94"/>
        </radialGradient>
        <radialGradient id="radial-gradient-3" cx="-428.54" cy="589.51" fx="-428.54" fy="589.51" r=".5" gradientTransform="translate(9717.09 13144.08) scale(22 -22)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#4a90e2"/>
          <stop offset=".7" stop-color="#357abd"/>
          <stop offset="1" stop-color="#2c5f94"/>
        </radialGradient>
        <radialGradient id="radial-gradient-4" cx="-423.46" cy="583.13" fx="-423.46" fy="583.13" r=".5" gradientTransform="translate(6879.21 9335.58) scale(16 -16)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#4a90e2"/>
          <stop offset=".7" stop-color="#357abd"/>
          <stop offset="1" stop-color="#2c5f94"/>
        </radialGradient>
        <radialGradient id="radial-gradient-5" cx="-419.14" cy="580.69" fx="-419.14" fy="580.69" r=".5" gradientTransform="translate(6196.58 8172.75) scale(14 -14)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#4a90e2"/>
          <stop offset=".7" stop-color="#357abd"/>
          <stop offset="1" stop-color="#2c5f94"/>
        </radialGradient>
        <radialGradient id="radial-gradient-6" cx="-419.2" cy="590.4" fx="-419.2" fy="590.4" r=".5" gradientTransform="translate(2768.79 5176.54) scale(6.25 -8.53)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#4a90e2"/>
          <stop offset=".7" stop-color="#357abd"/>
          <stop offset="1" stop-color="#2c5f94"/>
        </radialGradient>
        <radialGradient id="radial-gradient-7" cx="-439.98" cy="598.31" fx="-439.98" fy="598.31" r=".5" gradientTransform="translate(19606 26410.25) scale(44 -44)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#4a90e2"/>
          <stop offset=".7" stop-color="#357abd"/>
          <stop offset="1" stop-color="#2c5f94"/>
        </radialGradient>
        <radialGradient id="radial-gradient-8" cx="-430.52" cy="590.03" fx="-430.52" fy="590.03" r=".5" gradientTransform="translate(10539.72 14206.92) scale(24 -24)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#4a90e2"/>
          <stop offset=".7" stop-color="#357abd"/>
          <stop offset="1" stop-color="#2c5f94"/>
        </radialGradient>
      </defs>
      <line class="cls-18" x1="293.6" y1="179.25" x2="371.6" y2="135.52"/>
      <line class="cls-13" x1="53.44" y1="32.58" x2="255.77" y2="93.42"/>
      <line class="cls-19" x1="370.1" y1="134.42" x2="255.77" y2="93.42"/>
      <line class="cls-10" x1="107.1" y1="11.42" x2="255.77" y2="93.42"/>
      <line class="cls-16" x1="331.44" y1="45.92" x2="255.77" y2="93.42"/>
      <line class="cls-12" x1="150.02" y1="139.92" x2="255.77" y2="93.42"/>
      <line class="cls-11" x1="212.1" y1="52.92" x2="53.44" y2="32.58"/>
      <line class="cls-15" x1="107.1" y1="9.92" x2="212.1" y2="49.25"/>
      <line class="cls-20" x1="331.44" y1="45.92" x2="371.6" y2="130.92"/>
      <line class="cls-14" x1="153.14" y1="141.85" x2="293.6" y2="179.25"/>
      <line class="cls-17" x1="57.77" y1="31.92" x2="107.1" y2="9.92"/>
      <circle class="cls-6" cx="57.77" cy="31.92" r="10"/>
      <circle class="cls-4" cx="371.6" cy="134.42" r="9"/>
      <circle class="cls-1" cx="293.6" cy="179.25" r="11"/>
      <circle class="cls-5" cx="107.1" cy="8.75" r="8"/>
      <circle class="cls-8" cx="331.44" cy="45.92" r="7"/>
      <ellipse class="cls-3" cx="150.02" cy="141.85" rx="3.12" ry="4.27"/>
      <circle class="cls-7" cx="255.77" cy="93.42" r="22"/>
      <text class="cls-9" transform="translate(0 119.75) scale(1.14 1)"><tspan x="0" y="0">Clarion</tspan></text>
      <circle class="cls-2" cx="212.1" cy="50.92" r="12"/>
      <text class="cls-21" transform="translate(19.78 146.26)"><tspan x="0" y="0">cont</tspan><tspan class="cls-22" x="40.48" y="0">e</tspan><tspan x="51.43" y="0">xtualized </tspan></text>
      <text id="rotatingText" class="cls-21" transform="translate(169.59 146.11)"><tspan x="0" y="0">asset management</tspan></text>
      <text/>
    </svg>
                
        </div>
        
<!-- The rest of the homepage is intentionally left blank for new concept development. -->

<script>
// Rotating text functionality for SVG
const rotatingTexts = [
    "asset management",
    "water utilities",
    "smart cities", 
    "infrastructure",
    "data systems",
    "operations",
    "decision making",
    "resource planning"
];

let currentIndex = 0;
const rotatingElement = document.getElementById('rotatingText');

function updateRotatingText() {
    if (rotatingElement) {
        // Fade out
        rotatingElement.style.opacity = '0';
        
        setTimeout(() => {
            // Change text content in the tspan
            const tspan = rotatingElement.querySelector('tspan');
            if (tspan) {
                tspan.textContent = rotatingTexts[currentIndex];
            }
            
            // Fade in
            rotatingElement.style.opacity = '1';
            
            // Move to next text
            currentIndex = (currentIndex + 1) % rotatingTexts.length;
        }, 300);
    }
}

// Start the rotation
if (rotatingElement) {
    rotatingElement.style.transition = 'opacity 0.3s ease-in-out';
    updateRotatingText();
    setInterval(updateRotatingText, 3000); // Change every 3 seconds
}
</script>
    </main>
    <footer>
        <div class="container">
            <p>&copy; 2025 . All rights reserved.</p>
        </div>
    </footer>
    <script>
        // Focused Knowledge Graph with Clear Theme Transitions
        class FocusedKnowledgeGraph {
            constructor() {
                this.canvas = null;
                this.ctx = null;
                this.container = null;
                this.nodes = new Map();
                this.particles = [];
                this.currentTheme = 0;
                this.animationId = null;
                this.isTransitioning = false;
                
                // Three focused themes with clear, distinct animations
                this.themes = [
                    {
                        name: 'Asset Management',
                        text: 'Asset Management',
                        description: 'Complete lifecycle tracking and optimization',
                        primaryColor: 'rgba(66, 165, 245, 0.8)',
                        secondaryColor: 'rgba(30, 136, 229, 0.6)',
                        flows: [
                            { from: 'gis', to: 'assets', intensity: 'high', delay: 0 },
                            { from: 'scada', to: 'assets', intensity: 'high', delay: 200 },
                            { from: 'assets', to: 'projects', intensity: 'medium', delay: 400 },
                            { from: 'schedule', to: 'projects', intensity: 'medium', delay: 600 },
                            { from: 'assets', to: 'compliance', intensity: 'low', delay: 800 }
                        ],
                        highlightNodes: ['gis', 'scada', 'assets', 'projects', 'schedule', 'compliance']
                    },
                    {
                        name: 'Hydraulic Modeling',
                        text: 'Hydraulic Modeling', 
                        description: 'Real-time simulation and predictive analytics',
                        primaryColor: 'rgba(105, 240, 174, 0.8)',
                        secondaryColor: 'rgba(0, 200, 83, 0.6)',
                        flows: [
                            { from: 'scada', to: 'modeling', intensity: 'high', delay: 0 },
                            { from: 'ami', to: 'modeling', intensity: 'high', delay: 150 },
                            { from: 'gis', to: 'modeling', intensity: 'medium', delay: 300 },
                            { from: 'modeling', to: 'projects', intensity: 'medium', delay: 500 },
                            { from: 'modeling', to: 'alerts', intensity: 'medium', delay: 650 },
                            { from: 'modeling', to: 'compliance', intensity: 'low', delay: 800 }
                        ],
                        highlightNodes: ['scada', 'ami', 'gis', 'modeling', 'projects', 'alerts']
                    },
                    {
                        name: 'Knowledge Management',
                        text: 'Knowledge Management',
                        description: 'AI-powered insights and decision support', 
                        primaryColor: 'rgba(255, 193, 7, 0.8)',
                        secondaryColor: 'rgba(255, 152, 0, 0.6)',
                        flows: [
                            { from: 'docs', to: 'knowledge', intensity: 'high', delay: 0 },
                            { from: 'cusi', to: 'knowledge', intensity: 'medium', delay: 200 },
                            { from: 'assets', to: 'knowledge', intensity: 'medium', delay: 350 },
                            { from: 'modeling', to: 'knowledge', intensity: 'medium', delay: 500 },
                            { from: 'knowledge', to: 'alerts', intensity: 'high', delay: 700 },
                            { from: 'knowledge', to: 'compliance', intensity: 'medium', delay: 900 }
                        ],
                        highlightNodes: ['docs', 'cusi', 'assets', 'modeling', 'knowledge', 'alerts', 'compliance']
                    }
                ];
                
                this.init();
            }
            
            init() {
                document.addEventListener('DOMContentLoaded', () => {
                    this.setupCanvas();
                    this.initializeNodes();
                    this.setupThemeRotation();
                    this.startAnimation();
                });
            }
            
            setupCanvas() {
                this.canvas = document.getElementById('particleCanvas');
                this.container = document.querySelector('.knowledge-graph');
                if (!this.canvas || !this.container) return;
                
                this.ctx = this.canvas.getContext('2d');
                this.resizeCanvas();
                
                window.addEventListener('resize', () => this.resizeCanvas());
            }
            
            resizeCanvas() {
                const rect = this.container.getBoundingClientRect();
                this.canvas.width = rect.width;
                this.canvas.height = rect.height;
            }
            
            initializeNodes() {
                setTimeout(() => {
                    const dataNodes = [
                        'gis', 'docs', 'scada', 'cusi', 'ami', 'schedule',
                        'knowledge', 'assets', 'projects', 'alerts', 'modeling', 'compliance'
                    ];
                    const angles = [0, 60, 120, 180, 240, 300, 30, 90, 150, 210, 270, 330];
                    dataNodes.forEach((nodeId, index) => {
                        const angle = angles[index];
                        const element = document.querySelector(`[data-type="${nodeId}"]`);
                        if (element) {
                            element.style.setProperty('--angle', angle);
                            element.style.animationDelay = `${angle * 0.01}s`;
                            this.nodes.set(nodeId, { element, angle, type: 'data' });
                        }
                    });
                    const coreElement = document.querySelector('.intelligence-core');
                    if (coreElement) {
                        this.nodes.set('core', { element: coreElement, angle: 0, type: 'core' });
                    }
                    // Start with first theme
                    this.activateTheme(0);
                }, 100);
            }
            
            setupThemeRotation() {
                // Slower rotation for better appreciation
                setInterval(() => {
                    if (!this.isTransitioning) {
                        this.nextTheme();
                    }
                }, 6000); // 6 seconds per theme
            }
            
            nextTheme() {
                this.currentTheme = (this.currentTheme + 1) % this.themes.length;
                this.activateTheme(this.currentTheme);
            }
            
            activateTheme(themeIndex) {
                if (this.isTransitioning) return;
                
                this.isTransitioning = true;
                this.currentTheme = themeIndex;
                const theme = this.themes[themeIndex];
                
                // Set theme data attribute for CSS theming
                this.container.setAttribute('data-theme', themeIndex);
                
                // Dramatic transition sequence
                this.startThemeTransition(theme);
            }
            
            startThemeTransition(theme) {
                // Smooth, non-jarring transition
                this.clearParticles();
                this.updateThemeText(theme);
                this.updateNodeEmphasis(theme);
                this.activateParticleFlows(theme);
            }
            
            clearParticles() {
                // Gradually fade out existing particles
                this.particles.forEach(particle => {
                    particle.life *= 0.3;
                });
            }
            
            updateThemeText(theme) {
                const textElement = document.querySelector('.rotating-text');
                if (textElement) {
                    textElement.style.transition = 'all 0.4s ease';
                    textElement.style.opacity = '0.7';
                    
                    setTimeout(() => {
                        textElement.textContent = theme.text;
                        textElement.style.opacity = '1';
                        textElement.style.color = theme.primaryColor;
                        textElement.style.textShadow = `0 0 20px ${theme.primaryColor}`;
                    }, 200);
                }
            }
            
            updateNodeEmphasis(theme) {
                // Reset all nodes to baseline state
                this.nodes.forEach(node => {
                    if (node.element) {
                        node.element.classList.remove('kg-primary', 'kg-secondary', 'kg-inactive');
                        node.element.style.filter = '';
                    }
                });
                
                // Apply subtle emphasis without changing layout
                const primaryNodes = theme.highlightNodes.slice(0, 3);
                const secondaryNodes = theme.highlightNodes.slice(3);
                
                // Highlight primary nodes (key to this theme)
                primaryNodes.forEach(nodeId => {
                    const node = this.nodes.get(nodeId);
                    if (node?.element) {
                        node.element.classList.add('kg-primary');
                        node.element.style.filter = `drop-shadow(0 0 12px ${theme.primaryColor})`;
                    }
                });
                
                // Subtle highlight for secondary nodes
                secondaryNodes.forEach(nodeId => {
                    const node = this.nodes.get(nodeId);
                    if (node?.element) {
                        node.element.classList.add('kg-secondary');
                        node.element.style.filter = `drop-shadow(0 0 8px ${theme.secondaryColor})`;
                    }
                });
                
                // Slightly de-emphasize unrelated nodes
                this.nodes.forEach((node, nodeId) => {
                    if (!theme.highlightNodes.includes(nodeId) && nodeId !== 'core') {
                        if (node.element) {
                            node.element.classList.add('kg-inactive');
                        }
                    }
                });
            }
            
            activateParticleFlows(theme) {
                // Start particle flows with staggered timing
                theme.flows.forEach(flow => {
                    setTimeout(() => {
                        this.createThemeParticleFlow(flow, theme);
                    }, flow.delay);
                });
                
                // Complete transition smoothly
                setTimeout(() => {
                    this.isTransitioning = false;
                }, 1500);
            }
            
            createThemeParticleFlow(flow, theme) {
                const fromNode = this.nodes.get(flow.from);
                const toNode = this.nodes.get(flow.to);
                
                if (!fromNode || !toNode) return;
                
                const fromPos = this.getNodePosition(fromNode);
                const toPos = this.getNodePosition(toNode);
                
                // Intensity-based particle count and characteristics  
                const particleCount = flow.intensity === 'high' ? 15 : flow.intensity === 'medium' ? 10 : 6;
                const particleSize = flow.intensity === 'high' ? 5 : flow.intensity === 'medium' ? 3.5 : 2.5;
                const color = flow.intensity === 'high' ? theme.primaryColor : theme.secondaryColor;
                
                // Create particles with staggered release
                for (let i = 0; i < particleCount; i++) {
                    setTimeout(() => {
                        this.particles.push(new ThemeParticle(fromPos, toPos, color, particleSize, theme));
                    }, i * 80);
                }
            }
            
            getNodePosition(node) {
                if (!node.element) return { x: 0, y: 0 };
                
                const rect = node.element.getBoundingClientRect();
                const canvasRect = this.canvas.getBoundingClientRect();
                
                return {
                    x: rect.left + rect.width / 2 - canvasRect.left,
                    y: rect.top + rect.height / 2 - canvasRect.top
                };
            }
            
            startAnimation() {
                const animate = () => {
                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                    
                    this.particles = this.particles.filter(particle => {
                        particle.update();
                        particle.draw(this.ctx);
                        return particle.life > 0;
                    });
                    
                    this.animationId = requestAnimationFrame(animate);
                };
                
                animate();
            }
            
            destroy() {
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                }
            }
        }
        
        // Enhanced particle class for theme-specific effects
        class ThemeParticle {
            constructor(start, end, color, size, theme) {
                this.start = { ...start };
                this.end = { ...end };
                this.position = { ...start };
                this.color = color;
                this.theme = theme;
                this.life = 1.0;
                this.speed = 0.015 + Math.random() * 0.02;
                this.progress = 0;
                this.size = size;
                this.trail = [];
                this.maxTrailLength = 10;
                this.glowIntensity = 0.8;
            }
            
            update() {
                this.progress += this.speed;
                
                const eased = this.easeInOutCubic(this.progress);
                
                this.position.x = this.start.x + (this.end.x - this.start.x) * eased;
                this.position.y = this.start.y + (this.end.y - this.start.y) * eased;
                
                this.trail.push({ ...this.position });
                if (this.trail.length > this.maxTrailLength) {
                    this.trail.shift();
                }
                
                if (this.progress >= 1) {
                    this.life -= 0.03;
                } else {
                    this.life = Math.min(1, this.progress * 4);
                }
            }
            
            draw(ctx) {
                if (this.life <= 0) return;
                
                // Enhanced trail with theme colors
                for (let i = 0; i < this.trail.length; i++) {
                    const trailPoint = this.trail[i];
                    const trailAlpha = (i / this.trail.length) * this.life * 0.4;
                    const trailSize = (i / this.trail.length) * this.size * 0.6;
                    
                    ctx.save();
                    ctx.globalAlpha = trailAlpha;
                    ctx.fillStyle = this.theme.secondaryColor;
                    ctx.beginPath();
                    ctx.arc(trailPoint.x, trailPoint.y, trailSize, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                }
                
                // Main particle with enhanced glow
                ctx.save();
                ctx.globalAlpha = this.life;
                ctx.fillStyle = this.color;
                ctx.shadowBlur = 15 * this.glowIntensity;
                ctx.shadowColor = this.color;
                ctx.beginPath();
                ctx.arc(this.position.x, this.position.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                
                // Inner bright core
                ctx.shadowBlur = 0;
                ctx.fillStyle = `rgba(255, 255, 255, ${this.life * 0.8})`;
                ctx.beginPath();
                ctx.arc(this.position.x, this.position.y, this.size * 0.4, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
            
            easeInOutCubic(t) {
                return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
            }
        }
        
        // Initialize the focused knowledge graph
        const focusedGraph = new FocusedKnowledgeGraph();
    </script>
</body>
</html> 